import{i as p,h as n,u as h,a as c,o as a,c as l,j as d,v as r,f as s,k as m,l as u,F as _,m as w}from"./index-8c9018c4.js";const y={getOrigin:t=>p.get(n.baseUrl.value+n.origin,{responseType:"blob",cancelToken:t}),useOpnidGetPassword:t=>p.get(n.baseUrl.value+n.useOpnidGetPassword,{params:{openid:t}})};const v={class:"box"},f={class:"content"},g=s("p",null," 请输入微信小程序端获取到的openid ",-1),b={class:"field"},k=s("label",{for:"password",class:"label"},"openid",-1),C={class:"control"},O={class:"field"},T={class:"control"},A={class:"box"},I=s("div",{class:"content"},[s("p",null," 使用方法：点击按钮复制/点击文本框复制后，跳转到支付宝红包领取页面，粘贴在红包口令处，点击确认，即可领取红包~~ ")],-1),P=s("div",{class:"field"},[s("div",{class:"control"})],-1),Q={class:"field"},S=s("label",{for:"password",class:"label"},"红包码",-1),q={class:"control"},B=["value"],E={key:0,class:"field"},F=s("p",null,"点击上方文本框手动复制红包码后打开支付宝红包页面即可领取红包~♡",-1),G=[F],M={key:1,class:"field"},U={class:"control"},V={key:2},$={key:3,class:"field"},j={class:"control"},N=s("div",{class:"content"},[s("p",null,"若本页有任何故障，辛苦联系我哦~QQ微信或者邮箱均可"),s("a",{href:"mailto:wwwa_2012@126.com"},"wwwa_2012@126.com")],-1),D={id:"weixin-tip"},L=s("img",{src:w,alt:"微信打开"},null,-1),z={props:[],name:"index",components:{},data(){return{thiscopyed:!1,suggestopeninbrowser:!1,manualcopy:!1,iamalipay:!1,thispassword:"",openid:""}},methods:{copythis(){var{text:t,copy:e,copied:o}=h({legacy:!0});e(this.thispassword),this.thishint="已尝试复制红包码到剪贴板！";const i=this;setTimeout(()=>{i.thiscopyed=!0,i.thishint="即将跳转到支付宝领红包！",setTimeout(()=>{window.location.href="alipayqr://platformapi/startapp?saId=88886666"},500)},1e3)},selectall(){this.$refs.password.select()},isAlipayOrElse(){var t=window.navigator.userAgent.toLowerCase();return t.match(/Alipay/i)=="alipay"?(this.iamalipay=!0,this.manualcopy=!0,!0):t.match(/MicroMessenger/i)=="micromessenger"||t.match(/QQ/i)=="qq"?(this.manualcopy=!0,this.suggestopeninbrowser=!0,!1):null},submit(){const t=this;console.log(this.openid),y.useOpnidGetPassword(this.openid).then(e=>{console.log(e),e.data.status=="success"?(t.thispassword=e.data.password,localStorage.setItem("openid",t.openid)):alert("领取失败"+e.data.message)})}},mounted(){this.isAlipayOrElse(),this.$store.state.tittle="openid兑换页面";const t=localStorage.getItem("openid");t==null||t==""||(this.openid=t)},updated(){const t=localStorage.getItem("openid");t==null||t==""||(this.openid=t)}},J=Object.assign(z,{setup(t){return h({legacy:!0}),c("clipboard-read"),c("clipboard-write"),(e,o)=>(a(),l(_,null,[d(s("div",v,[s("div",f,[g,s("div",b,[k,s("div",C,[d(s("input",{ref:"password",id:"password","onUpdate:modelValue":o[0]||(o[0]=i=>e.openid=i),class:"input",type:"text",placeholder:"openid"},null,512),[[m,e.openid]])])]),s("div",O,[s("div",T,[s("button",{onClick:o[1]||(o[1]=(...i)=>e.submit&&e.submit(...i)),class:"button is-primary"},"提交并获取红包码")])])])],512),[[r,!e.thispassword]]),d(s("div",A,[I,P,s("div",Q,[S,s("div",q,[s("input",{ref:"password",id:"password",value:e.thispassword,class:"input",type:"text",onFocus:o[2]||(o[2]=(...i)=>e.selectall&&e.selectall(...i)),placeholder:"这里应该会显示红包码"},null,40,B)])]),e.manualcopy?(a(),l("div",E,G)):(a(),l("div",M,[s("div",U,[s("button",{onClick:o[3]||(o[3]=(...i)=>e.copythis&&e.copythis(...i)),class:"button is-primary"},"复制并跳转到支付宝")])])),e.thiscopyed?(a(),l("div",V,"Tips:如果浏览器提醒是否允许打开支付宝，请点击允许~♡ \\n 若没有自动跳转到支付宝，辛苦复制口令后自行打开支付宝领取口令红包哦~")):u("",!0),e.iamalipay?(a(),l("div",$,[s("div",j,[s("button",{onClick:o[4]||(o[4]=(...i)=>e.copythis&&e.copythis(...i)),class:"button is-primary"},"直接跳转到红包页面")])])):u("",!0),N],512),[[r,e.thispassword]]),d(s("div",D,[s("p",null,[L,s("span",{onClick:o[5]||(o[5]=i=>e.suggestopeninbrowser=!1),id:"close",title:"关闭",class:"close"},"×")])],512),[[r,e.suggestopeninbrowser]])],64))}});export{J as default};
